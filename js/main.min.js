var tvDisplay=function(){function h(b,c){var a=b[c];null!==a&&void 0!==a||!m[b.contentType]||(a=m[b.contentType][c]);if(null===a||void 0===a)a=q[c];return a}function f(b){axios.get(r,{responseType:"json",data:{_:Date.now()}}).then(function(b){return b.data}).then(function(c){k=c.contentList||[];m=c.contentDefaults||{};q=c.displayDefaults||{};b&&e()})["catch"](function(b){0===k.length&&window.alert("Unable to load config: "+r+"\n\n"+b)})}var g=new URLSearchParams(window.location.search),n=g.get("config")||
"default",l=g.get("index")||-1,p=null,r="config/"+n+(-1===n.indexOf(".")?".json":""),q={},m={},k=[],d=document.getElementsByTagName("main")[0],g=document.getElementsByTagName("footer")[0];g.getElementsByClassName("float-left")[0].innerText="\u26ed "+n;g.removeAttribute("hidden");var e,t;t=function(){var b=k[l],c="content/"+b.contentType+"/html.txt";axios.get(c,{responseType:"text"}).then(function(a){return a.data}).then(function(a){tvDisplay.tvContent&&(tvDisplay.tvContent.destroy&&tvDisplay.tvContent.destroy(),
delete tvDisplay.tvContent);for(;d.firstChild;)d.removeChild(d.firstChild);d.innerHTML=a;if(a=d.getElementsByTagName("article")[0]){a.getAttribute("data-css")&&""!==a.getAttribute("data-css")&&d.insertAdjacentHTML("afterbegin",'<link rel="stylesheet" type="text/css" href="content/'+b.contentType+"/"+a.getAttribute("data-css")+'" />');var c=h(b,"fontFamily");c&&(a.style.fontFamily=c);if(c=h(b,"backgroundImage"))a.style.backgroundImage="url('"+c+"')";a.getAttribute("data-js")&&""!==a.getAttribute("data-js")&&
(c=document.createElement("script"),c.src="content/"+b.contentType+"/"+a.getAttribute("data-js"),c.onload=function(){tvDisplay.tvContent&&tvDisplay.tvContent.init&&tvDisplay.tvContent.init(b)},d.insertAdjacentElement("afterbegin",c))}a=1E3*(h(b,"displaySeconds")||60);p=window.setTimeout(e,a)})["catch"](function(){window.alert("Unable to load content: "+c)})};e=function(){if(p)try{window.clearTimeout(p)}catch(b){}l+=1;l>=k.length&&(l=0);t()};f(!0);window.setInterval(f,6E5);window.addEventListener("keyup",
function(b){switch(b.which||b.keyCode){case 39:case 40:case 78:e();break;case 82:f()}});document.getElementsByClassName("footer-btn-refresh")[0].addEventListener("click",function(){f(!1)});document.getElementsByClassName("footer-btn-next")[0].addEventListener("click",e);return{next:e,refresh:f,getContentProperty:h,contentContainer:d}}();
