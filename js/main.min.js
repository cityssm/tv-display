var tvDisplay=function(){function n(a,c){var b=a[c];null===b&&p[a.contentType]&&(b=p[a.contentType][c]);null===b&&(b=t[c]);return b}function g(a){axios.get(q,{responseType:"json"}).then(function(a){return a.data}).then(function(c){h=c.contentList;a&&e()})["catch"](function(a){0===h.length&&window.alert("Unable to load config: "+q+"\n\n"+a)})}var f=new URLSearchParams(window.location.search),l=f.get("config")||"default",k=f.get("index")||-1,m=null,q="config/"+l+(-1===l.indexOf(".")?".json":""),t={},
p={},h=[],d=document.getElementsByTagName("main")[0],f=document.getElementsByTagName("footer")[0];f.getElementsByClassName("float-left")[0].innerText=l;f.removeAttribute("hidden");var e,r;r=function(){var a=h[k],c="content/"+a.contentType+"/html.txt";axios.get(c,{responseType:"text"}).then(function(a){return a.data}).then(function(b){tvDisplay.content&&(tvDisplay.tvContent.destroy&&tvDisplay.tvContent.destroy(),delete tvDisplay.tvContent);for(;d.firstChild;)d.removeChild(d.firstChild);d.innerHTML=
b;if(b=d.getElementsByTagName("article")[0])if(b.getAttribute("data-css")&&""!==b.getAttribute("data-css")&&d.insertAdjacentHTML("afterbegin",'<link rel="stylesheet" type="text/css" href="content/'+a.contentType+"/"+b.getAttribute("data-css")+'" />'),b.getAttribute("data-js")&&""!==b.getAttribute("data-js")){var c=document.createElement("script");c.src="content/"+a.contentType+"/"+b.getAttribute("data-js");c.onload=function(){tvDisplay.tvContent&&tvDisplay.tvContent.init&&tvDisplay.tvContent.init(a)};
d.insertAdjacentElement("afterbegin",c)}b=1E3*(n(a,"displaySeconds")||60);m=window.setTimeout(e,b)})["catch"](function(){window.alert("Unable to load content: "+c)})};e=function(){if(m)try{window.clearTimeout(m)}catch(a){}k+=1;k>=h.length&&(k=0);r()};g(!0);window.setInterval(g,6E5);window.addEventListener("keyup",function(a){switch(a.which||a.keyCode){case 39:case 40:case 78:e();break;case 82:g()}});return{next:e,refresh:g,getContentProperty:n,contentContainer:d}}();
