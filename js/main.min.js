var tvDisplay=function(){function g(b,a){return b.hasOwnProperty(a)?b[a]:h.hasOwnProperty(b.contentType)&&h[b.contentType].hasOwnProperty(a)?h[b.contentType][a]:n.hasOwnProperty(a)?n[a]:null}function d(b){axios.get(q,{responseType:"json",data:{_:Date.now()}}).then(function(b){return b.data}).then(function(a){k=a.contentList||[];h=a.contentDefaults||{};n=a.displayDefaults||{};b&&f()})["catch"](function(b){0===k.length&&window.alert("Unable to load config: "+q+"\n\n"+b)})}var c=new URLSearchParams(window.location.search),
l=c.get("config")||"default",m=c.get("index")||-1,p=null,q=(-1===l.indexOf("/")?"config/":"")+l+(-1===l.indexOf(".")?".json":""),n={},h={},k=[],e=document.getElementsByTagName("main")[0],c=document.getElementsByTagName("footer")[0];c.getElementsByClassName("float-left")[0].innerText="\u26ed "+l;c.removeAttribute("hidden");var f,r;r=function(){var b=k[m],a=g(b,"remoteURL"),d=(a?a:"")+"content/"+b.contentType,c=d+"/html.txt";axios.get(c,{responseType:"text"}).then(function(b){return b.data}).then(function(a){tvDisplay.tvContent&&
(tvDisplay.tvContent.destroy&&tvDisplay.tvContent.destroy(),delete tvDisplay.tvContent);for(;e.firstChild;)e.removeChild(e.firstChild);e.innerHTML=a;if(a=e.getElementsByTagName("article")[0]){a.getAttribute("data-css")&&""!==a.getAttribute("data-css")&&e.insertAdjacentHTML("afterbegin",'<link rel="stylesheet" type="text/css" href="'+d+"/"+a.getAttribute("data-css")+'" />');var c=g(b,"fontFamily");c&&(a.style.fontFamily=c);if(c=g(b,"backgroundImage"))a.style.backgroundImage="url('"+d+"/../../"+c+"')";
a.getAttribute("data-js")&&""!==a.getAttribute("data-js")&&(c=document.createElement("script"),c.src=d+"/"+a.getAttribute("data-js"),c.onload=function(){tvDisplay.tvContent&&tvDisplay.tvContent.init&&tvDisplay.tvContent.init(b)},e.insertAdjacentElement("afterbegin",c))}a=1E3*(g(b,"displaySeconds")||60);p=window.setTimeout(f,a)})["catch"](function(){window.alert("Unable to load content: "+c)})};f=function(){if(p)try{window.clearTimeout(p)}catch(b){}m+=1;m>=k.length&&(m=0);r()};d(!0);window.setInterval(d,
6E5);window.addEventListener("keyup",function(b){switch(b.which||b.keyCode){case 39:case 40:case 78:f();break;case 82:d()}});document.getElementsByClassName("footer-btn-refresh")[0].addEventListener("click",function(){d(!1)});document.getElementsByClassName("footer-btn-next")[0].addEventListener("click",f);return{next:f,refresh:d,getContentProperty:g,contentContainer:e,sanitizeText:function(b){var a=document.createElement("div");a.innerHTML=b;return a.innerText}}}();
