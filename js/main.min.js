var tvDisplay=function(){function h(b,a){return b.hasOwnProperty(a)?b[a]:k.hasOwnProperty(b.contentType)&&k[b.contentType].hasOwnProperty(a)?k[b.contentType][a]:p.hasOwnProperty(a)?p[a]:null}function f(b){axios.get(r,{responseType:"json",data:{_:Date.now()}}).then(function(b){return b.data}).then(function(a){l=a.contentList||[];k=a.contentDefaults||{};p=a.displayDefaults||{};b&&e()})["catch"](function(b){0===l.length&&window.alert("Unable to load config: "+r+"\n\n"+b)})}var g=new URLSearchParams(window.location.search),
m=g.get("config")||"default",n=g.get("index")||-1,q=null,r=(-1===m.indexOf("/")?"config/":"")+m+(-1===m.indexOf(".")?".json":""),p={},k={},l=[],c=document.getElementsByTagName("main")[0],g=document.getElementsByTagName("footer")[0];g.getElementsByClassName("float-left")[0].innerText="\u26ed "+m;g.removeAttribute("hidden");var e,t;t=function(){var b=l[n],a="content/"+b.contentType+"/html.txt";axios.get(a,{responseType:"text"}).then(function(b){return b.data}).then(function(a){tvDisplay.tvContent&&
(tvDisplay.tvContent.destroy&&tvDisplay.tvContent.destroy(),delete tvDisplay.tvContent);for(;c.firstChild;)c.removeChild(c.firstChild);c.innerHTML=a;if(a=c.getElementsByTagName("article")[0]){a.getAttribute("data-css")&&""!==a.getAttribute("data-css")&&c.insertAdjacentHTML("afterbegin",'<link rel="stylesheet" type="text/css" href="content/'+b.contentType+"/"+a.getAttribute("data-css")+'" />');var d=h(b,"fontFamily");d&&(a.style.fontFamily=d);if(d=h(b,"backgroundImage"))a.style.backgroundImage="url('"+
d+"')";a.getAttribute("data-js")&&""!==a.getAttribute("data-js")&&(d=document.createElement("script"),d.src="content/"+b.contentType+"/"+a.getAttribute("data-js"),d.onload=function(){tvDisplay.tvContent&&tvDisplay.tvContent.init&&tvDisplay.tvContent.init(b)},c.insertAdjacentElement("afterbegin",d))}a=1E3*(h(b,"displaySeconds")||60);q=window.setTimeout(e,a)})["catch"](function(){window.alert("Unable to load content: "+a)})};e=function(){if(q)try{window.clearTimeout(q)}catch(b){}n+=1;n>=l.length&&(n=
0);t()};f(!0);window.setInterval(f,6E5);window.addEventListener("keyup",function(b){switch(b.which||b.keyCode){case 39:case 40:case 78:e();break;case 82:f()}});document.getElementsByClassName("footer-btn-refresh")[0].addEventListener("click",function(){f(!1)});document.getElementsByClassName("footer-btn-next")[0].addEventListener("click",e);return{next:e,refresh:f,getContentProperty:h,contentContainer:c}}();
