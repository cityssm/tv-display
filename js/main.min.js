var tvDisplay=function(){function g(a,b){var c=a[b];null===c&&m[a.contentType]&&(c=m[a.contentType][b]);null===c&&(c=q[b]);return c}function h(a){axios.get(r,{responseType:"json"}).then(function(a){return a.data}).then(function(b){k=b.contentList||[];m=b.contentDefaults||{};q=b.displayDefaults||{};a&&e()})["catch"](function(a){0===k.length&&window.alert("Unable to load config: "+r+"\n\n"+a)})}var f=new URLSearchParams(window.location.search),n=f.get("config")||"default",l=f.get("index")||-1,p=null,
r="config/"+n+(-1===n.indexOf(".")?".json":""),q={},m={},k=[],d=document.getElementsByTagName("main")[0],f=document.getElementsByTagName("footer")[0];f.getElementsByClassName("float-left")[0].innerText=n;f.removeAttribute("hidden");var e,t;t=function(){var a=k[l],b="content/"+a.contentType+"/html.txt";axios.get(b,{responseType:"text"}).then(function(a){return a.data}).then(function(c){tvDisplay.content&&(tvDisplay.tvContent.destroy&&tvDisplay.tvContent.destroy(),delete tvDisplay.tvContent);for(;d.firstChild;)d.removeChild(d.firstChild);
d.innerHTML=c;if(c=d.getElementsByTagName("article")[0]){c.getAttribute("data-css")&&""!==c.getAttribute("data-css")&&d.insertAdjacentHTML("afterbegin",'<link rel="stylesheet" type="text/css" href="content/'+a.contentType+"/"+c.getAttribute("data-css")+'" />');var b=g(a,"fontFamily");b&&(c.style.fontFamily=b);if(b=g(a,"backgroundImage"))c.style.backgroundImage="url('"+b+"')";c.getAttribute("data-js")&&""!==c.getAttribute("data-js")&&(b=document.createElement("script"),b.src="content/"+a.contentType+
"/"+c.getAttribute("data-js"),b.onload=function(){tvDisplay.tvContent&&tvDisplay.tvContent.init&&tvDisplay.tvContent.init(a)},d.insertAdjacentElement("afterbegin",b))}c=1E3*(g(a,"displaySeconds")||60);p=window.setTimeout(e,c)})["catch"](function(){window.alert("Unable to load content: "+b)})};e=function(){if(p)try{window.clearTimeout(p)}catch(a){}l+=1;l>=k.length&&(l=0);t()};h(!0);window.setInterval(h,6E5);window.addEventListener("keyup",function(a){switch(a.which||a.keyCode){case 39:case 40:case 78:e();
break;case 82:h()}});return{next:e,refresh:h,getContentProperty:g,contentContainer:d}}();
